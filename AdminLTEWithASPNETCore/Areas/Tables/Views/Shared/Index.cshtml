@model AdminLTEWithASPNETCore.Models.UI.CommonTables.TableUI
@{
    Layout = "~/Views/Shared/AdminLTE/_Layout.cshtml";
}

<div class="card">
    <div class="card-header">
        <h3 class="card-title">@ViewData["Title"]</h3>
    </div>
    <div class="card-body">
        <table id="list" class="table table-bordered table-hover display">
            <thead>
                <tr>
                    @foreach (var f in Model.Fields)
                        if (f.Visible)
                        {
                            <th>@f.Label</th>
                        }
                </tr>
            </thead>
        </table>
    </div>
</div>

@section Header {
    <link href="~/lib/datatables.net-bs4/dataTables.bootstrap4.css" rel="stylesheet" />
    <link href="~/lib/datatables.net-responsive-bs4/responsive.bootstrap4.css" rel="stylesheet" />
    <link href="~/lib/datatables.net-buttons-bs4/buttons.bootstrap4.css" rel="stylesheet" />
}

@section Scripts {
    <script src="~/lib/pdfmake/pdfmake.js"></script>
    <script src="~/lib/pdfmake/vfs_fonts.js"></script>
    <script src="~/lib/jszip/jszip.js"></script>
    <script src="~/lib/datatables.net/jquery.dataTables.js"></script>
    <script src="~/lib/datatables.net-bs4/dataTables.bootstrap4.js"></script>
    <script src="~/lib/datatables-buttons/js/dataTables.buttons.js"></script>
    <script src="~/lib/datatables.net-buttons-bs4/buttons.bootstrap4.js"></script>
    <script src="~/lib/datatables-buttons/js/buttons.colVis.js"></script>
    <script src="~/lib/datatables-buttons/js/buttons.html5.js"></script>
    <script src="~/lib/datatables-buttons/js/buttons.print.js"></script>
    <script language="javascript">
        $(document).ready(function () {
            $('#list').dataTable({
                "processing": true,
                "responsive": true,
                "lengthChange": false,
                "autoWidth": false,
                dom: 'Bfrtip',
                "buttons": ["copy", "csv", "excel", "pdf", "print", "colvis"],
                "lengthMenu": [[10, 25, 50, -1], [10, 25, 50, "All"]],
                "serverSide": true,
                "filter": true,
                "columns": [
                    { "data": "IDCountry", "name": "IDCountry" },
                    { "data": "Name", "name": "Name" },
                ],
                "columnDefs": [{
                    "targets": [0],
                    "visible": false,
                    "searchable": false
                }],
                "ajax": {
                    "url": "@Model.ApiUrl",
                    "type": "POST",
                    "datatype": "json"
                }
            });
        });
    </script>
}
